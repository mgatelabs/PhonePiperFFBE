{
  "vars": [

    {
      "name": "raid-unit0-job",
      "display": "Unit 1 Job",
      "value": "-1",
      "type": "INT",
      "modify": "EDITABLE",
      "order": 0,
      "tierId": "raid-unit0",
      "values": [
        {"name": "Attack", "value": "0"},
        {"name": "Ability", "value": "1"},
        {"name": "Custom", "value": "-1"},
        {"name": "LB", "value": "2"}
      ],
      "description": "The job for unit 1"
    },
    {
      "name": "raid-unit0-col",
      "display": "Unit 1 Ability Column",
      "value": "0",
      "type": "INT",
      "modify": "EDITABLE",
      "order": 10,
      "tierId": "raid-unit0",
      "description": "The column location of the skill, 0 for left, 1 for right",
      "values": [
        {"name": "Left", "value": "0"},
        {"name": "Right", "value": "1"}
      ]
    },
    {
      "name": "raid-unit0-row",
      "display": "Unit 1 Ability Row",
      "value": "0",
      "type": "INT",
      "modify": "EDITABLE",
      "order": 10,
      "tierId": "raid-unit0",
      "description": "The row location of the skill, The first row is 0"
    },

    {
      "name": "raid-unit1-job",
      "display": "Unit 2 Job",
      "value": "-1",
      "type": "INT",
      "modify": "EDITABLE",
      "order": 0,
      "tierId": "raid-unit1",
      "values": [
        {"name": "Attack", "value": "0"},
        {"name": "Ability", "value": "1"},
        {"name": "Custom", "value": "-1"},
        {"name": "LB", "value": "2"}
      ],
      "description": "The job for unit 2"
    },
    {
      "name": "raid-unit1-col",
      "display": "Unit 2 Ability Column",
      "value": "0",
      "type": "INT",
      "modify": "EDITABLE",
      "order": 10,
      "tierId": "raid-unit1",
      "description": "The column location of the skill, 0 for left, 1 for right",
      "values": [
        {"name": "Left", "value": "0"},
        {"name": "Right", "value": "1"}
      ]
    },
    {
      "name": "raid-unit1-row",
      "display": "Unit 2 Ability Row",
      "value": "0",
      "type": "INT",
      "modify": "EDITABLE",
      "order": 10,
      "tierId": "raid-unit1",
      "description": "The row location of the skill, The first row is 0"
    },


    {
      "name": "raid-unit2-job",
      "display": "Unit 3 Job",
      "value": "-1",
      "type": "INT",
      "modify": "EDITABLE",
      "order": 0,
      "tierId": "raid-unit2",
      "values": [
        {"name": "Attack", "value": "0"},
        {"name": "Ability", "value": "1"},
        {"name": "Custom", "value": "-1"},
        {"name": "LB", "value": "2"}
      ],
      "description": "The job for unit 3"
    },
    {
      "name": "raid-unit2-col",
      "display": "Unit 3 Ability Column",
      "value": "0",
      "type": "INT",
      "modify": "EDITABLE",
      "order": 10,
      "tierId": "raid-unit2",
      "description": "The column location of the skill, 0 for left, 1 for right",
      "values": [
        {"name": "Left", "value": "0"},
        {"name": "Right", "value": "1"}
      ]
    },
    {
      "name": "raid-unit2-row",
      "display": "Unit 3 Ability Row",
      "value": "0",
      "type": "INT",
      "modify": "EDITABLE",
      "order": 10,
      "tierId": "raid-unit2",
      "description": "The row location of the skill, The first row is 0"
    },


    {
      "name": "raid-unit3-job",
      "display": "Unit 4 Job",
      "value": "-1",
      "type": "INT",
      "modify": "EDITABLE",
      "order": 0,
      "tierId": "raid-unit3",
      "values": [
        {"name": "Attack", "value": "0"},
        {"name": "Ability", "value": "1"},
        {"name": "Custom", "value": "-1"},
        {"name": "LB", "value": "2"}
      ],
      "description": "The job for unit 4"
    },
    {
      "name": "raid-unit3-col",
      "display": "Unit 4 Ability Column",
      "value": "0",
      "type": "INT",
      "modify": "EDITABLE",
      "order": 10,
      "tierId": "raid-unit3",
      "description": "The column location of the skill, 0 for left, 1 for right",
      "values": [
        {"name": "Left", "value": "0"},
        {"name": "Right", "value": "1"}
      ]
    },
    {
      "name": "raid-unit3-row",
      "display": "Unit 4 Ability Row",
      "value": "0",
      "type": "INT",
      "modify": "EDITABLE",
      "order": 10,
      "tierId": "raid-unit3",
      "description": "The row location of the skill, The first row is 0"
    },


    {
      "name": "raid-unit4-job",
      "display": "Unit 5 Job",
      "value": "-1",
      "type": "INT",
      "modify": "EDITABLE",
      "order": 0,
      "tierId": "raid-unit4",
      "values": [
        {"name": "Attack", "value": "0"},
        {"name": "Ability", "value": "1"},
        {"name": "Custom", "value": "-1"},
        {"name": "LB", "value": "2"}
      ],
      "description": "The job for unit 5"
    },
    {
      "name": "raid-unit4-col",
      "display": "Unit 5 Ability Column",
      "value": "0",
      "type": "INT",
      "modify": "EDITABLE",
      "order": 10,
      "tierId": "raid-unit4",
      "description": "The column location of the skill, 0 for left, 1 for right",
      "values": [
        {"name": "Left", "value": "0"},
        {"name": "Right", "value": "1"}
      ]
    },
    {
      "name": "raid-unit4-row",
      "display": "Unit 5 Ability Row",
      "value": "0",
      "type": "INT",
      "modify": "EDITABLE",
      "order": 10,
      "tierId": "raid-unit4",
      "description": "The row location of the skill, The first row is 0"
    },

    {
      "name": "raid-tap-0",
      "display": "1st Tap",
      "value": "-1",
      "type": "INT",
      "modify": "EDITABLE",
      "order": 0,
      "tierId": "raid-order",
      "values": [
        {"name": "Off", "value": "-1"},
        {"name": "Unit 1", "value": "0"},
        {"name": "Unit 2", "value": "1"},
        {"name": "Unit 3", "value": "2"},
        {"name": "Unit 4", "value": "3"},
        {"name": "Unit 5", "value": "4"},
        {"name": "Unit 6", "value": "5"}
      ],
      "description": "The job for unit 1"
    },
    {
      "name": "raid-tap-1",
      "display": "2nd Tap",
      "value": "-1",
      "type": "INT",
      "modify": "EDITABLE",
      "order": 0,
      "tierId": "raid-order",
      "values": [
        {"name": "Off", "value": "-1"},
        {"name": "Unit 1", "value": "0"},
        {"name": "Unit 2", "value": "1"},
        {"name": "Unit 3", "value": "2"},
        {"name": "Unit 4", "value": "3"},
        {"name": "Unit 5", "value": "4"},
        {"name": "Unit 6", "value": "5"}
      ],
      "description": "The job for unit 1"
    },
    {
      "name": "raid-tap-2",
      "display": "3rd Tap",
      "value": "-1",
      "type": "INT",
      "modify": "EDITABLE",
      "order": 0,
      "tierId": "raid-order",
      "values": [
        {"name": "Off", "value": "-1"},
        {"name": "Unit 1", "value": "0"},
        {"name": "Unit 2", "value": "1"},
        {"name": "Unit 3", "value": "2"},
        {"name": "Unit 4", "value": "3"},
        {"name": "Unit 5", "value": "4"},
        {"name": "Unit 6", "value": "5"}
      ],
      "description": "The job for unit 1"
    },
    {
      "name": "raid-tap-3",
      "display": "4th Tap",
      "value": "-1",
      "type": "INT",
      "modify": "EDITABLE",
      "order": 0,
      "tierId": "raid-order",
      "values": [
        {"name": "Off", "value": "-1"},
        {"name": "Unit 1", "value": "0"},
        {"name": "Unit 2", "value": "1"},
        {"name": "Unit 3", "value": "2"},
        {"name": "Unit 4", "value": "3"},
        {"name": "Unit 5", "value": "4"},
        {"name": "Unit 6", "value": "5"}
      ],
      "description": "The job for unit 1"
    },
    {
      "name": "raid-tap-4",
      "display": "5th Tap",
      "value": "-1",
      "type": "INT",
      "modify": "EDITABLE",
      "order": 0,
      "tierId": "raid-order",
      "values": [
        {"name": "Off", "value": "-1"},
        {"name": "Unit 1", "value": "0"},
        {"name": "Unit 2", "value": "1"},
        {"name": "Unit 3", "value": "2"},
        {"name": "Unit 4", "value": "3"},
        {"name": "Unit 5", "value": "4"},
        {"name": "Unit 6", "value": "5"}
      ],
      "description": "The job for unit 1"
    },
    {
      "name": "raid-tap-5",
      "display": "6th Tap",
      "value": "-1",
      "type": "INT",
      "modify": "EDITABLE",
      "order": 0,
      "tierId": "raid-order",
      "values": [
        {"name": "Off", "value": "-1"},
        {"name": "Unit 1", "value": "0"},
        {"name": "Unit 2", "value": "1"},
        {"name": "Unit 3", "value": "2"},
        {"name": "Unit 4", "value": "3"},
        {"name": "Unit 5", "value": "4"},
        {"name": "Unit 6", "value": "5"},
        {"name": "Auto", "value": "-2"}
      ],
      "description": "The job for unit 6"
    }

  ],
  "varTiers": [
    {"title":"Unit 1", "id":"raid-unit0", "tabId":"raid"},
    {"title":"Unit 2", "id":"raid-unit1", "tabId":"raid"},
    {"title":"Unit 3", "id":"raid-unit2", "tabId":"raid"},
    {"title":"Unit 4", "id":"raid-unit3", "tabId":"raid"},
    {"title":"Unit 5", "id":"raid-unit4", "tabId":"raid"},
    {"title":"Order", "id":"raid-order", "tabId":"raid"}
  ],
  "imports": [],
  "states": {

    "raid-battle": {
      "name": "Raid - Battle (Override)",
      "description": "!",
      "includes": [
        "_raid_battle-setup",
        "_raid_battle-custom_*",
        "_raid_battle-tap",
        "_raid-battle-message",
        "_raid-to_results",
        "_common-no_op"
      ],
      "variables": {
        "InLoop": {
          "value": "0",
          "type": "INT"
        }
      }
    },

    "@raid-setup-unit": {
      "name": "Raid - Battle - Unit Setup",
      "variables": {
        "index": {
          "value": "0",
          "type": "INT"
        },
        "job": {
          "value": "0",
          "type": "INT"
        },
        "skill-row": {
          "value": "0",
          "type": "INT"
        },
        "skill-column": {
          "value": "0",
          "type": "INT"
        }
      },
      "statements": [
        {
          "actions": [
            {
              "condition": {
                "is": "EQUAL",
                "var": "job",
                "value": "0"
              },
              "type": "GOTO",
              "value": "JOB_0_LOGIC"
            },
            {
              "condition": {
                "is": "EQUAL",
                "var": "job",
                "value": "1"
              },
              "type": "GOTO",
              "value": "JOB_1_LOGIC"
            },
            {
              "condition": {
                "is": "EQUAL",
                "var": "job",
                "value": "2"
              },
              "type": "GOTO",
              "value": "JOB_2_LOGIC"
            },
            {
              "type": "GOTO",
              "value": "NOTHING"
            },
            {
              "type": "LABEL",
              "value": "JOB_0_LOGIC"
            },
            {
              "type": "GOTO",
              "value": "NOTHING"
            },
            {
              "type": "LABEL",
              "value": "JOB_1_LOGIC"
            },
            {
              "condition":
                    {
                      "is": "CALL",
                      "value": "@isBattleReady",
                      "and": [
                        {
                          "is": "CALL",
                          "value": "@isUnitReady",
                          "args": {
                            "index": "${index}"
                          }
                        },
                        {
                          "is": "CALL",
                          "value": "@isUnitAtkReady",
                          "args": {
                            "index": "${index}"
                          }
                        }
                    ]
                  }
                ,
              "type": "GOTO",
              "value": "JOB_1_WORK"
            },
            {
              "type": "GOTO",
              "value": "NOTHING"
            },
            {
              "type": "LABEL",
              "value": "JOB_2_LOGIC"
            },
            {
              "condition":
                    {
                      "is": "CALL",
                      "value": "@isBattleReady",
                      "and": [
                        {
                          "is": "CALL",
                          "value": "@isUnitReady",
                          "args": {
                            "index": "${index}"
                          }
                        },
                        {
                          "not": "CALL",
                          "value": "@isUnitLbSelected",
                          "args": {
                            "index": "${index}"
                          }
                        }
                    ]
                  }
                ,
              "type": "GOTO",
              "value": "JOB_2_WORK"
            },
            {
              "type": "GOTO",
              "value": "NOTHING"
            },
            {
              "type": "LABEL",
              "value": "JOB_1_WORK"
            },
            {
              "type": "INFO",
              "value": "Unit ${index} Ability Setup"
            },
            {
              "type": "CALL",
              "value": "@showUnitActions",
              "args": {
                "index": "${index}"
              }
            },
            {
              "type": "CALL",
              "value": "@selectUnitAction",
              "args": {
                "row": "${skill-row}",
                "column": "${skill-column}"
              }
            },
            { "type": "CALL", "value": "@keepAlive" },
            {
              "type": "RETURN",
              "value": "1"
            },
            {
              "type": "LABEL",
              "value": "JOB_2_WORK"
            },
            {
              "type": "INFO",
              "value": "Unit ${index} LB Setup"
            },
            {
              "type": "CALL",
              "value": "@showUnitActions",
              "args": {
                "index": "${index}"
              }
            },
            {
              "type": "CALL",
              "value": "@selectUnitAction",
              "args": {
                "row": "0",
                "column": "0"
              }
            },
            { "type": "CALL", "value": "@keepAlive" },
            {
              "type": "RETURN",
              "value": "1"
            },
            {
              "type": "LABEL",
              "value": "NOTHING"
            },
            {
              "type": "RETURN",
              "value": "0"
            }
          ]
        }

      ]
    },

    "_raid_battle-setup": {
      "name": "Raid - Battle - Auto",
      "statements": [
        {
          "condition": {
            "is": "CALL",
            "value": "@isBattleReady",
            "and": [
              {
                "is": "EQUAL",
                "value": "1",
                "var":"InLoop"
              }
            ]
          },
          "actions": [
            {
              "type": "INFO",
              "value": "Pressing Reload, for speed purposes"
            },
            {
              "type": "TAP",
              "value": "battle-reload"
            },
            {
              "type": "SET",
              "value": "0",
              "var": "InLoop"
            },
            {
              "type": "WAIT",
              "value": "1200"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
		    {
          "condition": {
            "is": "SCREEN",
            "value": "battle-actions"
          },
          "actions": [
            {
              "type": "INFO",
              "value": "Battle Actions Left Open, Closing"
            },
            {
              "type": "TAP",
              "value": "battle-actions-back"
            },
            {
              "type": "WAIT",
              "value": "1000"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
		    {
          "condition": {
            "is": "SCREEN",
            "value": "battle-menu"
          },
          "actions": [
            {
              "type": "INFO",
              "value": "Battle Menu Left Open, Closing"
            },
            {
              "type": "TAP",
              "value": "battle-menu-back"
            },
            {
              "type": "WAIT",
              "value": "1000"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        // Unit 0
        {
          "condition": {
            "is": "CALL",
            "value": "@raid-setup-unit",
            "args": {
              "index": "0",
              "job": "${raid-unit0-job}",
              "skill-row": "${raid-unit0-row}",
              "skill-column": "${raid-unit0-col}"
            }
          },
          "actions": [
            { "type": "WAIT", "value": "400" },
            { "type": "REPEAT", "value": "" }
          ]
        },
        // Unit 1
        {
          "condition": {
            "is": "CALL",
            "value": "@raid-setup-unit",
            "args": {
              "index": "1",
              "job": "${raid-unit1-job}",
              "skill-row": "${raid-unit1-row}",
              "skill-column": "${raid-unit1-col}"
            }
          },
          "actions": [
            { "type": "WAIT", "value": "400" },
            { "type": "REPEAT", "value": "" }
          ]
        },
        // Unit 2
        {
          "condition": {
            "is": "CALL",
            "value": "@raid-setup-unit",
            "args": {
              "index": "2",
              "job": "${raid-unit2-job}",
              "skill-row": "${raid-unit2-row}",
              "skill-column": "${raid-unit2-col}"
            }
          },
          "actions": [
            { "type": "WAIT", "value": "400" },
            { "type": "REPEAT", "value": "" }
          ]
        },
        // Unit 3
        {
          "condition": {
            "is": "CALL",
            "value": "@raid-setup-unit",
            "args": {
              "index": "3",
              "job": "${raid-unit3-job}",
              "skill-row": "${raid-unit3-row}",
              "skill-column": "${raid-unit3-col}"
            }
          },
          "actions": [
            { "type": "WAIT", "value": "400" },
            { "type": "REPEAT", "value": "" }
          ]
        },
        // Unit 4
        {
          "condition": {
            "is": "CALL",
            "value": "@raid-setup-unit",
            "args": {
              "index": "4",
              "job": "${raid-unit4-job}",
              "skill-row": "${raid-unit4-row}",
              "skill-column": "${raid-unit4-col}"
            }
          },
          "actions": [
            { "type": "WAIT", "value": "400" },
            { "type": "REPEAT", "value": "" }
          ]
        }
      ]
    },


    "_raid_battle-tap": {
      "name": "Raid - Battle - Tap",
      "statements": [
        {
          "condition": {
            "is": "CALL",
            "value": "@isBattleReady"
          },
          "actions": [
            {
              "type": "INFO",
              "value": "Fighting"
            },
            {
              "type": "BATCH",
              "value": "START"
            },
            {
              "condition": {
                "not": "EQUAL",
                "var": "raid-tap-0",
                "value": "-1"
              },
              "type": "CALL",
              "value": "@tapUnit",
              "args": {
                "index": "${raid-tap-0}"
              }
            },
            {
              "condition": {
                "not": "EQUAL",
                "var": "raid-tap-1",
                "value": "-1"
              },
              "type": "CALL",
              "value": "@tapUnit",
              "args": {
                "index": "${raid-tap-1}"
              }
            },
            {
              "condition": {
                "not": "EQUAL",
                "var": "raid-tap-2",
                "value": "-1"
              },
              "type": "CALL",
              "value": "@tapUnit",
              "args": {
                "index": "${raid-tap-2}"
              }
            },
            {
              "condition": {
                "not": "EQUAL",
                "var": "raid-tap-3",
                "value": "-1"
              },
              "type": "CALL",
              "value": "@tapUnit",
              "args": {
                "index": "${raid-tap-3}"
              }
            },
            {
              "condition": {
                "not": "EQUAL",
                "var": "raid-tap-4",
                "value": "-1"
              },
              "type": "CALL",
              "value": "@tapUnit",
              "args": {
                "index": "${raid-tap-4}"
              }
            },
            {
              "condition": {
                "not": "EQUAL",
                "var": "raid-tap-5",
                "value": "-1",
                "and": [
                  {
                    "not": "EQUAL",
                    "var": "raid-tap-5",
                    "value": "-2"
                  }
                ]
              },
              "type": "CALL",
              "value": "@tapUnit",
              "args": {
                "index": "${raid-tap-5}"
              }
            },
            {
              "type": "BATCH",
              "value": "END"
            },
            {
              "condition": {
                "is": "EQUAL",
                "var": "raid-tap-5",
                "value": "-2"
              },
              "type": "INFO",
              "value": "Auto"
            },
            {
              "condition": {
                "is": "EQUAL",
                "var": "raid-tap-5",
                "value": "-2"
              },
              "type": "TAP",
              "value": "battle-auto",
              "count": "2"
            },            
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        }
      ]
    }
  }
}